<!-- This is with styling, you can see the previous commit for simple implementation without styling -->

<div>
  <h1>Course Registration Form</h1>
  <form [hidden]="submitted" (ngSubmit)="onSubmit(id.value, name.value, selectedCourses)" #studentForm="ngForm">

    <div class="form-group">
      <label for="id">Student ID</label>
      <input type="text"
             class="form-control"
             id="id"
             required
             [(ngModel)]="model.id"
             name="id"
             #id="ngModel">
      <div [hidden]="id.valid || id.pristine" class="alert alert-danger">
        Student ID is required
      </div>
    </div>

    <div class="form-group">
      <label for="name">Student Name</label>
      <input type="text"
             class="form-control"
             id="name"
             required
             [(ngModel)]="model.name"
             name="name"
             #name="ngModel">
      <div [hidden]="name.valid || name.pristine" class="alert alert-danger">
        Name is required
      </div>
    </div>

    <div class="form-group">
      <label>Courses : </label>
      @for(course of courses; track course){
        <input type="checkbox"
               [value]="course"
               (change)="onCourseChange($event)">
        {{ course }}
      }
      @if(selectedCourses.length===0 && studentForm.submitted){
        <div class='alert alert-danger'>
            At least one course must be selected
        </div>
      }
    </div>

    <button type="submit"
            class="btn btn-success"
            [disabled]="!studentForm.form.valid">
      Submit
    </button>

    <button type="button"
            class="btn btn-default"
            (click)="newStudent(); studentForm.reset()">
      Reset
    </button>
  </form>
</div>

<div [hidden]="!submitted">
  <h2>You submitted the following:</h2>
  <div>Student ID: {{ model.id }}</div>
  <div>Name: {{ model.name }}</div>
  <div>Courses: {{ model.registered_courses.join(', ') }}</div>
  <button type="button" class="btn btn-primary" (click)="submitted=false">
    Edit
  </button>
</div>